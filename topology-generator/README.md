# Topology Generator

Application to generate a topology according to some parameters like:

* Number of namespaces
* Number of services per namespace
* Number of connections between services in the same namespace
* Number of random connections between services in different namespaces

## Platform Install

This demo has been tested using [Minikube](https://istio.io/latest/docs/setup/platform-setup/minikube/) and [Istio 1.12 Demo Profile](https://istio.io/latest/docs/setup/install/istioctl/#install-a-different-profile).

## Application Install

Create the application resources:

```bash
kubectl create ns topology-generator
kubectl apply -n topology-generator -f https://raw.githubusercontent.com/kiali/demos/master/topology-generator/build/generator/generator.yaml 
```

## Demo Design

This demo exposes a web application where with some parameters, a command is produced to be executed in the terminal against any cluster:

![generator](./doc/generator.png)

Visit the application through a proxy:

```bash
kubectl port-forward svc/topology-generator 8080:8080 -n topology-generator
```

Configure the parameters, click on "Generate", copy the command and execute it in a terminal.

As a result, the topology will be created to be observed and managed by Kiali:

![kiali](./doc/kiali.png)

## Cleanup

Delete all namespaces generated by the application:

```bash
kubectl delete ns --selector=generated-by=mimik
```

Delete the topology generator:

```bash
kubectl delete ns topology-generator
```

